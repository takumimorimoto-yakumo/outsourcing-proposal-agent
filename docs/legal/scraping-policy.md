# スクレイピングポリシー

**最終更新**: 2025-12-12
**バージョン**: 1.0

---

## 目次

1. [はじめに](#1-はじめに)
2. [基本方針](#2-基本方針)
3. [技術的な配慮](#3-技術的な配慮)
4. [各サービスへの配慮](#4-各サービスへの配慮)
5. [利用者の責任](#5-利用者の責任)
6. [問題発生時の対応](#6-問題発生時の対応)

---

## 1. はじめに

### 1.1. 本ポリシーの目的

このスクレイピングポリシーは、proposal-generator が行うWebスクレイピングに関する方針を定め、対象サービスおよび利用者の双方にとって健全な利用を促進することを目的としています。

### 1.2. スクレイピングの範囲

本ツールがスクレイピングを行う範囲：

| 対象 | 取得情報 | 目的 |
|------|---------|------|
| ランサーズ | 公開案件情報 | 提案文生成 |
| クラウドワークス | 公開案件情報 | 提案文生成 |

### 1.3. スクレイピングの頻度

- 1案件につき1回のアクセス
- ユーザーの明示的な操作によってのみ実行
- 自動的・定期的なスクレイピングは行わない

---

## 2. 基本方針

### 2.1. 遵守事項

本ツールは、以下の原則に基づいてスクレイピングを行います：

1. **robots.txt の尊重**
   - 各サービスの robots.txt を確認
   - 禁止されているパスへのアクセスを避ける

2. **利用規約の遵守**
   - 各サービスの利用規約を確認
   - 禁止事項に該当する行為を避ける

3. **サーバー負荷への配慮**
   - 適切なリクエスト間隔
   - 人間らしいアクセスパターン

4. **公開情報のみの取得**
   - ログイン不要で閲覧可能な情報のみを対象
   - 非公開情報へのアクセスを試みない

### 2.2. 禁止される行為

本ツールは以下の行為を行いません：

- 認証が必要なページへのアクセス
- 非公開情報の取得
- 大量のページを短時間でクロール
- サーバーに過度な負荷をかける行為
- アクセス制限の回避

---

## 3. 技術的な配慮

### 3.1. リクエスト間隔

```python
# 最小リクエスト間隔
MIN_REQUEST_INTERVAL = 5.0  # 秒

# 人間らしい振る舞い
HUMAN_LIKE_DELAY = {
    "min": 2.0,   # 最小待機時間
    "max": 4.0,   # 最大待機時間
}
```

### 3.2. User-Agent

一般的なブラウザを模倣するUser-Agentを使用し、ボットであることを偽装しません。

```python
USER_AGENT = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
```

### 3.3. リトライポリシー

```python
RETRY_POLICY = {
    "max_retries": 3,        # 最大リトライ回数
    "retry_delay": 5,        # リトライ間隔（秒）
    "backoff_factor": 2,     # 指数バックオフ
}
```

### 3.4. エラー時の挙動

| エラーコード | 挙動 |
|-------------|------|
| 403 Forbidden | アクセスを中止、ユーザーに通知 |
| 429 Too Many Requests | 一定時間待機後にリトライ |
| 503 Service Unavailable | リトライ後、失敗なら中止 |

---

## 4. 各サービスへの配慮

### 4.1. ランサーズ

#### 利用規約の確認

- [ランサーズ利用規約](https://www.lancers.jp/terms)
- 最新の利用規約を確認の上、ご利用ください

#### アクセス対象

| パス | 対象 | 備考 |
|------|------|------|
| `/work/detail/{id}` | 公開案件詳細 | 対象 |
| `/mypage/*` | マイページ | 対象外 |
| `/messages/*` | メッセージ | 対象外 |

#### 注意事項

- ログインが必要な案件は対象外
- 案件情報の二次利用は利用規約に従う
- 取得した情報は提案文生成目的のみに使用

### 4.2. クラウドワークス

#### 利用規約の確認

- [クラウドワークス利用規約](https://crowdworks.jp/pages/agreement)
- 最新の利用規約を確認の上、ご利用ください

#### アクセス対象

| パス | 対象 | 備考 |
|------|------|------|
| `/public/jobs/{id}` | 公開案件詳細 | 対象 |
| `/member/*` | 会員ページ | 対象外 |
| `/messages/*` | メッセージ | 対象外 |

#### 注意事項

- ログインが必要な案件は対象外
- 案件情報の二次利用は利用規約に従う
- 取得した情報は提案文生成目的のみに使用

---

## 5. 利用者の責任

### 5.1. 利用規約の確認

利用者は、本ツールを使用する前に以下を行う責任があります：

1. 対象サービスの最新の利用規約を確認する
2. スクレイピングに関する条項を理解する
3. 利用規約に違反しないことを確認する

### 5.2. 適切な使用

利用者は、以下の点に注意して本ツールを使用してください：

- **必要最小限のアクセス**: 必要な案件のみをスクレイピング
- **手動での確認**: 生成された提案文の内容を確認
- **異常の報告**: 問題が発生した場合は開発者に報告

### 5.3. 自己責任

以下について、利用者が自己の責任で対応するものとします：

- 対象サービスのアカウント管理
- 利用規約違反によるペナルティへの対応
- 本ツールの利用に起因するいかなる問題

---

## 6. 問題発生時の対応

### 6.1. サービス側からの連絡

対象サービスから連絡があった場合：

1. 即座にスクレイピングを停止
2. サービス側の指示に従う
3. 必要に応じて本ツールの使用を中止

### 6.2. アクセス制限を受けた場合

アクセス制限（403、アカウント停止等）を受けた場合：

1. 本ツールの使用を一時停止
2. 原因を調査
3. サービス側に連絡が必要な場合は利用者が対応

### 6.3. 開発者への報告

以下の問題が発生した場合は、開発者に報告してください：

- サイト構造の変更によりスクレイピングが失敗する
- 想定外のアクセスパターンが発生している
- サービス側から警告・連絡があった

報告先: [GitHub Issues](https://github.com/your-username/proposal-generator/issues)

---

## 重要な注意事項

### 法的リスク

スクレイピングには法的リスクが伴う場合があります：

- 利用規約違反によるアカウント停止
- 不正アクセス禁止法への抵触（認証回避等）
- 著作権法への抵触（情報の二次利用）

**本ツールの利用により生じた法的問題について、開発者は一切の責任を負いません。**

### 倫理的な利用

本ツールは、提案活動の効率化を目的として開発されています。以下のような利用は避けてください：

- 大量の案件に対するスパム提案
- 競合他社への妨害目的での利用
- サービスの運営を妨げる行為

---

## 関連ドキュメント

- [利用規約・免責事項](./terms-of-use.md)
- [スクレイピング仕様](../specs/scraping.md)
- [非機能要件](../requirements/non-functional.md)
